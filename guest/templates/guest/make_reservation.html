{% extends "main_page/base.html" %} {% block content %} {% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'guest/style.css' %}?{% now 'U' %}" />
<h1>Welcome {{ guest_name }}!</h1>

<!-- <input type="submit" value="Log out" class="btn btn-primary logout-button"/> -->
<form method="POST">
    <!-- <input class="btn btn-primary logout-button"> -->
    <div class="btn logout-button">
        <a href="{% url 'guest_logout' %} "> Logout </a>
    </div>
</form>

<ul class="nav nav-tabs">
    <li><a href="{% url 'guest_home' %}">My reservations</a></li>
    <li class="active"><a href="#">Make a reservation</a></li>
</ul>

<div class="dropdown">
    <button class="dropbtn">
    Filter By
    <i class="fa fa-caret-down"></i>
  </button>
    <div class="dropdown-content">
        <div>
            <a>
                Price
                <form method="POST">
                    {% csrf_token %}
                    <div class="price-filter-field">
                        {{ filter_form.visible_fields.0 }}
                    </div>
                    <input type="submit" name="filter_by_price" value="Apply" class="btn filter-button"/>
                </form>
            </a>
        </div>
        <div>
            <a>
                Availability
                <form method="POST">
                    {% csrf_token %}
                    <input type="submit" name="filter_by_availability" value="Hotels with available rooms" class="btn filter-button" style="width: 100%;margin:10px;"/>
                </form>
            </a>
        </div>
    </div>
</div>

<!-- <form method="POST">
    <input class="btn btn-primary logout-button"> 
     <div class="btn logout-button">Filter</div>
</form> -->

{% for hotel in hotels %}

<div class="reservation">
    <form method="GET">
        <button type="submit" name="select_hotel" class="reservation-button" value="{{ hotel.hotel_id }}">
      <u>{{ hotel.location }}</u>
    </button>
    </form>
    {% if hotel.hotel_id == selected_hotel_id %}
    <div class="reservation-text">
        <form method="POST">
            {% csrf_token %} {{ reservation_form.as_p }}
            <input type="submit" name="make_reservation" value="Make reservation" class="btn button" />
        </form>
        {% if success == 1 %}
        <div class="success-div">
            <p>Reservation successful!</p>
        </div>
        {% endif %} {% if success == 0 %}
        <div class="failure-div">
            <p>Something went wrong</p>
        </div>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endfor %} {% endblock content %}